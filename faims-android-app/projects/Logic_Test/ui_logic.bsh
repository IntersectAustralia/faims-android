Object locationObj = fetchAll("select vocabid, vocabname from vocabulary left join attributekey using (attributeid) where attributename = 'location';");
Object typeObj = fetchAll("select vocabid, vocabname from vocabulary left join attributekey using (attributeid) where attributename = 'type';");

System.out.println(locationObj);
System.out.println(typeObj);

populateDropDown("simple_entity_1/tab/location", locationObj);
populateList("simple_entity_1/tab/type", typeObj);

populateDropDown("simple_entity_2/tab/location", locationObj);
populateList("simple_entity_2/tab/type", typeObj);

populateList("simple_entity_3/tab3/location", locationObj);
populateList("simple_entity_3/tab3/type", typeObj);

showRelationshipTab() {
	showTabGroup("relationship");
	Object entityObj = fetchAll("select uuid, uuid from ArchEntity;");
	populateDropDown("relationship/tab2/top_entity", entityObj);
	populateDropDown("relationship/tab2/bottom_entity", entityObj);
	Object relObj = fetchAll("select RelationshipId, RelationshipId from Relationship;");
	populateDropDown("relationship/tab2/relationship", relObj);
}

onEvent("empty_entity/tab/next", "click", "showTabGroup(\"simple_entity_1\")");
onEvent("simple_entity_1/tab/next", "click", "showTabGroup(\"simple_entity_2\")");
onEvent("simple_entity_2/tab/next", "click", "showTabGroup(\"simple_entity_3\")");
onEvent("simple_entity_3/tab1/next", "click", "showRelationshipTab()");

String e;
String se1;
String se2;
String se3;
String r;

saveEmptyEntity(entity_id) {
	List attributes = createAttributeList();
	e = saveArchEnt(entity_id, "empty", null, attributes);
}

saveSimpleEntity1(entity_id) {
	List attributes = createAttributeList();
	attributes.add(createEntityAttribute("name", getFieldValue("simple_entity_1/tab/name"), null, null, null));
	attributes.add(createEntityAttribute("count", getFieldValue("simple_entity_1/tab/count"), null, null, null));
	attributes.add(createEntityAttribute("date", getFieldValue("simple_entity_1/tab/date"), null, null, null));
	attributes.add(createEntityAttribute("time", getFieldValue("simple_entity_1/tab/time"), null, null, null));
	attributes.add(createEntityAttribute("location", getFieldValue("simple_entity_1/tab/location"), null, null, null));
	List values = getFieldValue("simple_entity_1/tab/type");
	for (Object o : values) {
		attributes.add(createEntityAttribute("type", o.getValue(), null, null, null));
	}
	se1 = saveArchEnt(entity_id, "Simple", null, attributes);
}

saveSimpleEntity2(entity_id) {
	List attributes = createAttributeList();
	attributes.add(createEntityAttribute("name", getFieldValue("simple_entity_2/tab/name"), null, null, null));
	attributes.add(createEntityAttribute("count", getFieldValue("simple_entity_2/tab/count"), null, getFieldValue("simple_entity_2/tab/count-description"), getFieldValue("simple_entity_2/tab/count-certainty")));
	attributes.add(createEntityAttribute("date", getFieldValue("simple_entity_2/tab/date"), null, null, null));
	attributes.add(createEntityAttribute("time", getFieldValue("simple_entity_2/tab/time"), null, null, null));
	attributes.add(createEntityAttribute("location", getFieldValue("simple_entity_2/tab/location"), null, null, getFieldValue("simple_entity_2/tab/location-certainty")));
	List values = getFieldValue("simple_entity_2/tab/type");
	for (Object o : values) {
		attributes.add(createEntityAttribute("type", o.getValue(), null, null, null));
	}
	se2 = saveArchEnt(entity_id, "Simple", null, attributes);
}

saveSimpleEntity3(entity_id) {
	List attributes = createAttributeList();
	attributes.add(createEntityAttribute("name", getFieldValue("simple_entity_3/tab1/name"), null, null, null));
	attributes.add(createEntityAttribute("count", getFieldValue("simple_entity_3/tab1/count"), null, getFieldValue("simple_entity_3/tab1/count-description"), getFieldValue("simple_entity_3/tab1/count-certainty")));
	attributes.add(createEntityAttribute("date", getFieldValue("simple_entity_3/tab2/date"), null, null, null));
	attributes.add(createEntityAttribute("time", getFieldValue("simple_entity_3/tab2/time"), null, null, null));
	attributes.add(createEntityAttribute("location", getFieldValue("simple_entity_3/tab3/location"), null, null, getFieldValue("simple_entity_3/tab3/location-certainty")));
	List values = getFieldValue("simple_entity_3/tab3/type");
	for (Object o : values) {
		attributes.add(createEntityAttribute("type", o.getValue(), null, null, null));
	}
	se3 = saveArchEnt(entity_id, "Simple", null, attributes);
}

saveRelationship(rel_id) {
	List attributes = createAttributeList();
	attributes.add(createRelationshipAttribute("name", getFieldValue("relationship/tab1/name"), null));
	r = saveRel(rel_id, "abovebelow", null, attributes);
	Object relObj = fetchAll("select RelationshipId, RelationshipId from Relationship;");
	populateDropDown("relationship/tab2/relationship", relObj);
}

saveEntityRelationship() {
	addReln(getFieldValue("relationship/tab2/top_entity"), getFieldValue("relationship/tab2/relationship"), "above");
	addReln(getFieldValue("relationship/tab2/bottom_entity"), getFieldValue("relationship/tab2/relationship"), "below");
}

onEvent("empty_entity/tab/update", "click", "saveEmptyEntity(e)");
onEvent("simple_entity_1/tab/update", "click", "saveSimpleEntity1(se1)");
onEvent("simple_entity_2/tab/update", "click", "saveSimpleEntity2(se2)");
onEvent("simple_entity_3/tab1/update", "click", "saveSimpleEntity3(se3)");
onEvent("relationship/tab1/update", "click", "saveRelationship(r)");

onEvent("empty_entity/tab/save", "click", "saveEmptyEntity(null)");
onEvent("simple_entity_1/tab/save", "click", "saveSimpleEntity1(null)");
onEvent("simple_entity_2/tab/save", "click", "saveSimpleEntity2(null)");
onEvent("simple_entity_3/tab1/save", "click", "saveSimpleEntity3(null)");
onEvent("relationship/tab1/save", "click", "saveRelationship(null)");
onEvent("relationship/tab2/save", "click", "saveEntityRelationship()");